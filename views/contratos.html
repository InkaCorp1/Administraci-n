<div class="content-wrapper">
    <!-- Hero Banner (Estilo Situación Bancaria) -->
    <div class="contratos-hero">
        <div class="hero-bg-contratos"></div>
        <div class="hero-content">
            <div class="hero-icon-contratos">
                <i class="fas fa-file-contract"></i>
            </div>
            <h1 class="hero-title-contratos">Gestión de Contratos</h1>
            <p class="hero-subtitle-contratos">Registro y control de contratos institucionales y externos</p>
        </div>
        
        <div class="contratos-hero-stats">
            <div class="contratos-hero-stat">
                <span id="stat-total-contratos" class="contratos-hero-value">0</span>
                <span class="contratos-hero-label">Total Contratos</span>
            </div>
            <div class="contratos-hero-stat">
                <span id="stat-contratos-activos" class="contratos-hero-value">0</span>
                <span class="contratos-hero-label">Contratos Activos</span>
            </div>
            <button id="btn-registrar-contrato" class="btn btn-gold btn-hero">
                <i class="fas fa-plus"></i> Registrar Contrato
            </button>
        </div>
    </div>

    <div class="module-filters">
        <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" id="contratos-search" placeholder="Buscar por nombre, RUC o detalle...">
        </div>
        <div class="filter-group">
            <select id="filter-pais">
                <option value="">Todos los Países</option>
                <option value="Ecuador">Ecuador</option>
                <option value="Perú">Perú</option>
                <option value="Estados Unidos">Estados Unidos</option>
            </select>
            <select id="filter-tipo">
                <option value="">Todos los Tipos</option>
                <option value="Nosotros">Nosotros</option>
                <option value="Otro">Otro</option>
            </select>
        </div>
    </div>

    <div id="contratos-grid" class="contratos-grid">
        <!-- Las tarjetas de contratos se cargarán aquí dinámicamente -->
        <div class="loading-state">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Cargando contratos...</p>
        </div>
    </div>
</div>

<!-- Modal para Registro/Edición de Contrato (Diseño Mejorado) -->
<div id="modal-contrato" class="modal-overlay" style="display: none;">
    <div class="modal-card modal-large">
        <div class="modal-header">
            <div class="modal-header-content">
                <h2 id="modal-title"><i class="fas fa-file-signature"></i> Registrar Nuevo Contrato</h2>
                <p>Completa los campos para dar de alta el contrato en el sistema</p>
            </div>
            <button class="close-modal" onclick="closeContratoModal()">&times;</button>
        </div>
        <form id="form-contrato" class="modal-body">
            <div class="form-grid">
                <div class="form-group">
                    <label>Fecha del Contrato</label>
                    <input type="date" id="fecha_contrato" required>
                </div>
                <div class="form-group">
                    <label>Parte del Contrato</label>
                    <div class="toggle-buttons">
                        <button type="button" class="btn-toggle active" data-value="Nosotros" id="btn-nosotros">Nosotros</button>
                        <button type="button" class="btn-toggle" data-value="Otro" id="btn-otro">Otro</button>
                        <input type="hidden" id="parte_contrato" value="Nosotros">
                    </div>
                </div>
                <div class="form-group">
                    <label>Nombre o Razón Social</label>
                    <input type="text" id="nombre_razon" placeholder="Nombre completo" required>
                </div>
                <div class="form-group">
                    <label>Cédula o RUC</label>
                    <input type="text" id="cedula_ruc" placeholder="ID fiscal" required>
                </div>
                <div class="form-group">
                    <label>País</label>
                    <select id="pais_contrato" required>
                        <option value="Ecuador">Ecuador</option>
                        <option value="Perú">Perú</option>
                        <option value="Estados Unidos">Estados Unidos</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Monto del Contrato ($)</label>
                    <input type="number" step="0.01" id="monto_contrato" placeholder="0.00" required>
                </div>
                <div class="form-group full-width">
                    <label>Detalle del Contrato</label>
                    <textarea id="detalle_contrato" rows="3" placeholder="Descripción detallada del contrato..." required></textarea>
                </div>
                <div class="form-group">
                    <label>Frecuencia de Contrato</label>
                    <select id="frecuencia_contrato" required onchange="handleFrecuenciaChange()">
                        <option value="anual">Anual</option>
                        <option value="mensual">Mensual</option>
                        <option value="dias">Por Días</option>
                    </select>
                </div>
                <div class="form-group">
                    <label id="label-duracion">Cantidad (Años)</label>
                    <input type="number" id="cantidad_duracion" min="1" value="1" required oninput="calculateEndDate()">
                </div>
                <div class="form-group">
                    <label>Fecha de Finalización</label>
                    <input type="date" id="fecha_fin" required readonly>
                </div>
                <div class="form-group full-width">
                    <label>Fotografía/Documento del Contrato</label>
                    <div class="upload-container">
                        <div id="drop-area-contrato" class="drop-area">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>Arrastra o haz clic para subir imagen</p>
                            <input type="file" id="file-contrato" accept="image/*" hidden>
                        </div>
                        <div id="preview-container-contrato" class="preview-container hidden">
                            <img id="preview-contrato" src="" alt="Vista previa">
                            <button type="button" class="btn-remove-img" id="btn-remove-img">&times;</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" onclick="closeContratoModal()">Cancelar</button>
                <button type="submit" class="btn btn-primary" id="btn-save-contrato">Guardar Contrato</button>
            </div>
        </form>
    </div>
</div>
