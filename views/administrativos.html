<!-- Vista Gastos Administrativos - INKA CORP -->
<div class="content-wrapper administrativos-wrapper">
    <!-- Hero Header del Módulo -->
    <div class="administrativos-hero">
        <div class="hero-bg-administrativos"></div>
        <div class="hero-content-administrativos">
            <div class="hero-icon-administrativos">
                <i class="fas fa-file-invoice-dollar"></i>
            </div>
            <h1 class="hero-title-administrativos">Gastos Administrativos</h1>
            <p class="hero-subtitle-administrativos">Gestión y control de egresos internos</p>
        </div>

        <!-- Stats integrados en hero -->
        <div class="administrativos-hero-stats">
            <div class="adm-hero-stat">
                <span class="adm-hero-value" id="stat-adm-total-count">0</span>
                <span class="adm-hero-label">Registros</span>
            </div>
            <div class="adm-hero-stat">
                <span class="adm-hero-value" id="stat-adm-total-monto">$0.00</span>
                <span class="adm-hero-label">Gasto Total</span>
            </div>
            <div class="adm-hero-stat">
                <span class="adm-hero-value" id="stat-adm-mes-actual">$0.00</span>
                <span class="adm-hero-label">Este Mes</span>
            </div>
        </div>
    </div>

    <!-- Filtros y Búsqueda -->
    <div class="administrativos-toolbar">
        <div class="search-wrapper">
            <i class="fas fa-search" style="color: var(--gray-400);"></i>
            <input type="text" id="search-administrativos" class="search-input" placeholder="Buscar por motivo...">
        </div>

        <div class="date-filters">
            <div class="filter-group">
                <label for="filter-adm-desde">Desde:</label>
                <input type="date" id="filter-adm-desde" class="input-premium sm">
            </div>
            <div class="filter-group">
                <label for="filter-adm-hasta">Hasta:</label>
                <input type="date" id="filter-adm-hasta" class="input-premium sm">
            </div>
            <button class="btn btn-secondary btn-sm" id="btn-adm-ver-todo" title="Ver todos los registros">
                <i class="fas fa-list"></i> Ver Todo
            </button>
        </div>

        <button class="btn btn-primary" id="btn-nuevo-gasto-adm">
            <i class="fas fa-plus"></i> <span class="desktop-only">Nuevo Gasto</span>
        </button>
        <button class="btn btn-sync" id="refresh-administrativos" title="Sincronizar datos">
            <i class="fas fa-sync-alt"></i>
        </button>
    </div>

    <!-- Tabla de Gastos -->
    <div class="adm-table-container">
        <table class="adm-table">
            <thead>
                <tr>
                    <th>Fecha</th>
                    <th>Motivo</th>
                    <th>Monto</th>
                    <th>Evidencia</th>
                    <th style="width: 50px;"></th>
                </tr>
            </thead>
            <tbody id="adm-table-body">
                <!-- Filas dinámicas -->
                <tr>
                    <td colspan="6" style="text-align: center; padding: 3rem;">
                        <div class="spinner" style="margin: 0 auto 1rem;"></div>
                        <p>Cargando gastos administrativos...</p>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Mensaje cuando no hay resultados -->
    <div id="adm-empty" class="hidden" style="text-align: center; padding: 4rem;">
        <i class="fas fa-folder-open" style="font-size: 3rem; color: var(--gray-300); margin-bottom: 1rem;"></i>
        <p style="color: var(--gray-500);">No se encontraron gastos registrados</p>
    </div>
</div>

<!-- Modal Nuevo/Editar Gasto Administrativo -->
<div id="modal-gasto-adm" class="modal-premium hidden">
    <div class="modal-backdrop" data-close-modal></div>
    <div class="modal-card-premium small">
        <div class="modal-header-premium">
            <h2 class="modal-title-premium" id="modal-adm-title">Registrar Nuevo Gasto</h2>
            <button class="modal-close-premium" data-close-modal>
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body-premium">
            <form id="form-gasto-adm" class="premium-form">
                <input type="hidden" id="adm-id-gasto">

                <div class="form-row">
                    <div class="form-group-premium">
                        <label for="adm-fecha"><i class="fas fa-calendar-alt"></i> Fecha de Gasto</label>
                        <input type="date" id="adm-fecha" required class="input-premium">
                    </div>
                    <div class="form-group-premium">
                        <label for="adm-monto"><i class="fas fa-dollar-sign"></i> Monto</label>
                        <input type="number" id="adm-monto" step="0.01" required class="input-premium"
                            placeholder="0.00">
                    </div>
                </div>

                <div class="form-group-premium">
                    <label for="adm-motivo"><i class="fas fa-comment-dots"></i> Motivo / Concepto</label>
                    <textarea id="adm-motivo" required class="input-premium" rows="3"
                        placeholder="Descripción detallada del gasto..."></textarea>
                </div>

                <div class="form-group-premium">
                    <label for="adm-file-input"><i class="fas fa-camera"></i> Fotografía / Comprobante</label>
                    <div class="upload-area-premium" id="adm-dropzone">
                        <!-- Botones integrados en el cuadro -->
                        <div id="adm-upload-placeholder" class="upload-buttons">
                            <button type="button" class="btn-icon btn-camera"
                                onclick="document.getElementById('adm-camera-input').click()">
                                <i class="fas fa-camera"></i>
                                <span>Cámara</span>
                            </button>
                            <button type="button" class="btn-icon btn-gallery"
                                onclick="document.getElementById('adm-file-input').click()">
                                <i class="fas fa-image"></i>
                                <span>Galería</span>
                            </button>
                        </div>

                        <div id="adm-preview-container" class="hidden">
                            <img id="adm-preview" src="" alt="Comprobante">
                            <button type="button" class="btn-remove-preview" id="remove-adm-preview">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <input type="file" id="adm-file-input" accept="image/*" class="hidden">
                        <input type="file" id="adm-camera-input" accept="image/*" capture="environment" class="hidden">
                        <input type="hidden" id="adm-fotografia-url">
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer-premium">
            <button class="btn btn-secondary" data-close-modal>Cancelar</button>
            <button type="submit" form="form-gasto-adm" class="btn btn-primary" id="btn-save-gasto-adm">
                <i class="fas fa-save"></i> Guardar Gasto
            </button>
        </div>
    </div>
</div>

<!-- Modal Ver Evidencia (Imagen Full) -->
<div id="modal-evidencia-adm" class="modal-premium hidden">
    <div class="modal-backdrop" data-close-modal></div>
    <div class="modal-card-premium medium">
        <div class="modal-header-premium">
            <h2 class="modal-title-premium">Evidencia de Gasto</h2>
            <button class="modal-close-premium" data-close-modal>
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body-premium centering" style="background: #f8fafc;">
            <div class="comprobante-viewer">
                <img id="evidencia-full-img" src="" alt="Cargando evidencia..."
                    style="max-width: 100%; border-radius: 0.5rem; box-shadow: 0 10px 25px rgba(0,0,0,0.1);">
            </div>
        </div>
        <div class="modal-footer-premium">
            <button class="btn btn-secondary" data-close-modal>Cerrar</button>
            <a id="btn-download-evidencia" href="#" target="_blank" class="btn btn-primary">
                <i class="fas fa-download"></i> Ver Original
            </a>
        </div>
    </div>
</div>